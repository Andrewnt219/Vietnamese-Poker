{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Temporary Work\\\\Project\\\\react-poker-vn\\\\Vietnamese-Poker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"D:\\\\Temporary Work\\\\Project\\\\react-poker-vn\\\\Vietnamese-Poker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Temporary Work\\\\Project\\\\react-poker-vn\\\\Vietnamese-Poker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\Temporary Work\\\\Project\\\\react-poker-vn\\\\Vietnamese-Poker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\Temporary Work\\\\Project\\\\react-poker-vn\\\\Vietnamese-Poker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\Temporary Work\\\\Project\\\\react-poker-vn\\\\Vietnamese-Poker\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import classes from'./App.module.css';import Player from'./Player/Player';import InitGame from'./InitGame/InitGame';import avatars from'./Player/avatar/avatar.js';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={/* Game resources */players:[],card:[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10],playerCount:0,/* game controls */error:'',turn:0,/* display controls */phase:0// 0: Init, 1: Game, 2: End\n};_this.playerNumberHandler=function(event){var playerCount=event.target.value,error=\"\";if(playerCount>10){error=\"Maximum 10 players!\";playerCount=10;}/* Random avatar allocate */for(var i=avatars.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var _ref=[avatars[j],avatars[i]];avatars[i]=_ref[0];avatars[j]=_ref[1];}var players=[];var n=0;for(var _i=0;_i<playerCount;_i++){players.push({id:\"player-\".concat(_i),name:\"player-\".concat(_i),card:[],avatar:avatars[n++]/* cardNumber: 0, */ //remove due to inconsistent\n/*  score: 0 */ //remove due to inconsistent\n});}_this.setState({players:players,playerCount:playerCount,error:error});};_this.changeName=function(event,index){var players=_toConsumableArray(_this.state.players);players[index].name=event.target.value;_this.setState({players:players});};_this.gameStart=function(){if(_this.state.playerCount>1){(function(){/* shuffle deck */var card=_toConsumableArray(_this.state.card);for(var i=card.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var _ref2=[card[j],card[i]];card[i]=_ref2[0];card[j]=_ref2[1];console.log(j);}/* Distributes cards */var players=_toConsumableArray(_this.state.players);for(var _i2=0;_i2<2;_i2++){players=players.map(function(player){player.card.push(card.pop());return player;});}/* hide init & display game UI */_this.setState({players:players,card:card,phase:1,error:\"\"});})();}else _this.setState({error:\"There must be at least 2 players\"});};_this.draw=function(){var players=_toConsumableArray(_this.state.players);var activePlayerIndex=_this.state.turn%_this.state.playerCount;var activePlayer=players[activePlayerIndex];/* maximum 5 cards */if(activePlayer.card.length<5){var deck=_this.state.card;activePlayer.card[activePlayer.card.length]=deck.pop();/* calculate score */var score=activePlayer.card.reduce(function(score,cardValue){return score+cardValue;});/* announce winner if card = 5 and value < 21 */if(activePlayer.card.length===5&&score<=21){}_this.setState({players:players,error:\"\"});}else _this.setState({error:\"5 cards max!\"});};_this.deal=function(){/* if last player then announce winner */if(_this.state.turn===Number(_this.state.playerCount-1)){/* End game */_this.setState({phase:2,error:\"\"});}else{var players=_toConsumableArray(_this.state.players);var activePlayerIndex=_this.state.turn%_this.state.playerCount;var activePlayer=players[activePlayerIndex];/* only deal if score > 16 */if(activePlayer.card.reduce(function(score,cardValue){return score+cardValue;})>15||activePlayer.card.length===5){var turn=_this.state.turn;turn++;_this.setState({turn:turn,error:\"\"});}else _this.setState({error:\"Score > 15 to deal\"});}/* set active */};return _this;}_createClass(App,[{key:\"render\",value:function render(){var ui=null;switch(this.state.phase){case 0:ui=React.createElement(\"div\",{className:classes.init},React.createElement(\"h3\",null,\"Numbers of players\"),React.createElement(\"input\",{className:classes.inputNumber,type:\"number\",max:\"10\",onChange:this.playerNumberHandler}),React.createElement(\"button\",{className:classes.startBtn,onClick:this.gameStart,value:\"Game Start!\"},\"Game Start!\"),React.createElement(InitGame,{changeName:this.changeName,count:this.state.playerCount,players:_toConsumableArray(this.state.players)}));break;case 1:var playerComponent=_toConsumableArray(this.state.players).map(function(player){var score=player.card.reduce(function(score,cardValue){return score+cardValue;});return React.createElement(Player,{key:player.name,avatar:player.avatar,name:player.name,card:player.card,cardNumber:player.card.length,score:score>21?\"BUSTED\":player.card.length===5?\"WINNER\":score});});ui=React.createElement(\"div\",{className:classes.game},playerComponent,React.createElement(\"button\",{className:classes.button,onClick:this.draw},\"Draw\"),React.createElement(\"button\",{className:classes.button,onClick:this.deal},\"Deal\"));break;case 2:ui=React.createElement(\"p\",null,\"End Game\");break;default:ui=React.createElement(\"p\",null,\"Whoops! Something went wrong ... \");}return React.createElement(\"div\",{className:classes.App},React.createElement(\"h1\",{className:classes.title},\"Vietnamese Poker\"),React.createElement(\"div\",{className:classes.container},ui,React.createElement(\"p\",{className:classes.error},this.state.error)));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["D:/Temporary Work/Project/react-poker-vn/Vietnamese-Poker/src/App.js"],"names":["React","Component","classes","Player","InitGame","avatars","App","state","players","card","playerCount","error","turn","phase","playerNumberHandler","event","target","value","i","length","j","Math","floor","random","n","push","id","name","avatar","setState","changeName","index","gameStart","console","log","map","player","pop","draw","activePlayerIndex","activePlayer","deck","score","reduce","cardValue","deal","Number","ui","init","inputNumber","startBtn","playerComponent","game","button","title","container"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport classes from './App.module.css';\r\nimport Player from './Player/Player'\r\nimport InitGame from './InitGame/InitGame'\r\nimport avatars from './Player/avatar/avatar.js'\r\n\r\nclass App extends Component {\r\n  state = {\r\n    /* Game resources */\r\n    players: [],\r\n    card: [\r\n      1, 1, 1, 1,\r\n      2, 2, 2, 2,\r\n      3, 3, 3, 3,\r\n      4, 4, 4, 4,\r\n      5, 5, 5, 5,\r\n      6, 6, 6, 6,\r\n      7, 7, 7, 7,\r\n      8, 8, 8, 8,\r\n      9, 9, 9, 9,\r\n      10, 10, 10, 10,\r\n      10, 10, 10, 10,\r\n      10, 10, 10, 10\r\n    ],\r\n    playerCount: 0,\r\n    /* game controls */\r\n    error: '',\r\n    turn: 0,\r\n    /* display controls */\r\n    phase: 0 // 0: Init, 1: Game, 2: End\r\n  }\r\n\r\n  /* Game initialization phase */\r\n  /* Custom number of players */\r\n  playerNumberHandler = (event) => {\r\n    let playerCount = event.target.value, error = \"\";\r\n    if (playerCount > 10) {\r\n      error = \"Maximum 10 players!\"\r\n      playerCount = 10;\r\n    }\r\n    /* Random avatar allocate */\r\n    for (let i = avatars.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1));\r\n      [avatars[i], avatars[j]] = [avatars[j], avatars[i]];\r\n    }\r\n    const players = [];\r\n    let n = 0;\r\n    for (let i = 0; i < playerCount; i++) {\r\n      players.push({\r\n        id: `player-${i}`,\r\n        name: `player-${i}`,\r\n        card: [],\r\n        avatar: avatars[n++]\r\n        /* cardNumber: 0, */ //remove due to inconsistent\r\n        /*  score: 0 */ //remove due to inconsistent\r\n      })\r\n    }\r\n    this.setState({ players: players, playerCount: playerCount, error: error });\r\n  }\r\n  /* Modify player's name */\r\n  changeName = (event, index) => {\r\n    const players = [...this.state.players];\r\n    players[index].name = event.target.value;\r\n    this.setState({ players: players })\r\n  }\r\n  gameStart = () => {\r\n    if (this.state.playerCount > 1) {\r\n      /* shuffle deck */\r\n      const card = [...this.state.card];\r\n      for (let i = card.length - 1; i > 0; i--) {\r\n        let j = Math.floor(Math.random() * (i + 1));\r\n        [card[i], card[j]] = [card[j], card[i]];\r\n        console.log(j);\r\n      }\r\n\r\n\r\n      /* Distributes cards */\r\n      let players = [...this.state.players];\r\n      for (let i = 0; i < 2; i++) players = players.map(player => { player.card.push(card.pop()); return player });\r\n\r\n      /* hide init & display game UI */\r\n      this.setState({ players: players, card: card, phase: 1, error: \"\" });\r\n    } else this.setState({ error: \"There must be at least 2 players\" })\r\n\r\n  }\r\n\r\n  /* Game phase */\r\n  draw = () => {\r\n    const players = [...this.state.players];\r\n    const activePlayerIndex = this.state.turn % this.state.playerCount;\r\n    const activePlayer = players[activePlayerIndex];\r\n\r\n    /* maximum 5 cards */\r\n    if (activePlayer.card.length < 5) {\r\n      const deck = this.state.card;\r\n      activePlayer.card[activePlayer.card.length] = deck.pop();\r\n      /* calculate score */\r\n      const score = activePlayer.card.reduce((score, cardValue) => score + cardValue)\r\n      /* announce winner if card = 5 and value < 21 */\r\n      if (activePlayer.card.length === 5 && score <= 21) { }\r\n\r\n      this.setState({ players: players, error: \"\" })\r\n    } else\r\n      this.setState({ error: \"5 cards max!\" })\r\n  }\r\n\r\n  deal = () => {\r\n    /* if last player then announce winner */\r\n    if (this.state.turn === Number(this.state.playerCount - 1)) {\r\n      /* End game */\r\n      this.setState({ phase: 2, error: \"\" });\r\n    } else {\r\n      const players = [...this.state.players];\r\n      const activePlayerIndex = this.state.turn % this.state.playerCount\r\n      const activePlayer = players[activePlayerIndex];\r\n      /* only deal if score > 16 */\r\n      if (activePlayer.card.reduce((score, cardValue) => score + cardValue) > 15 || activePlayer.card.length === 5) {\r\n        let turn = this.state.turn;\r\n        turn++;\r\n        this.setState({ turn: turn, error: \"\" });\r\n      } else this.setState({ error: \"Score > 15 to deal\" })\r\n    }\r\n    /* set active */\r\n  }\r\n\r\n  render() {\r\n    let ui = null;\r\n    switch (this.state.phase) {\r\n      case 0:\r\n        ui = (\r\n          <div className={classes.init}>\r\n            <h3>Numbers of players</h3>\r\n            <input className={classes.inputNumber} type=\"number\" max=\"10\" onChange={this.playerNumberHandler} />\r\n            <button className={classes.startBtn} onClick={this.gameStart} value=\"Game Start!\">Game Start!</button>\r\n            <InitGame changeName={this.changeName} count={this.state.playerCount} players={[...this.state.players]}  />\r\n          </div>\r\n        );\r\n        break;\r\n      case 1:\r\n        const playerComponent = [...this.state.players].map(player => {\r\n          const score = player.card.reduce((score, cardValue) => score + cardValue);\r\n          return (\r\n            <Player key={player.name} avatar={player.avatar} name={player.name} card={player.card} cardNumber={player.card.length} score={score > 21 ? \"BUSTED\" : player.card.length === 5 ? \"WINNER\" : score} />\r\n          )\r\n        }\r\n        )\r\n        ui = (\r\n          <div className={classes.game}>\r\n            {playerComponent}\r\n            <button className={classes.button} onClick={this.draw}>Draw</button>\r\n            <button className={classes.button} onClick={this.deal}>Deal</button>\r\n          </div>\r\n        )\r\n        break;\r\n      case 2:\r\n        ui = (<p>End Game</p>);\r\n        break;\r\n      default:\r\n        ui = (<p>Whoops! Something went wrong ... </p>)\r\n    }\r\n    return (\r\n      <div className={classes.App} >\r\n        <h1 className={classes.title}>Vietnamese Poker</h1>\r\n        <div className={classes.container}>\r\n          {ui}\r\n          <p className={classes.error}>{this.state.error}</p>\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n\r\n  }\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}