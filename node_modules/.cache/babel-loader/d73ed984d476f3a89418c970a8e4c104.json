{"ast":null,"code":"var _jsxFileName = \"D:\\\\Temporary Work\\\\Project\\\\react-poker-vn\\\\Vietnamese-Poker\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport classes from './App.module.css';\nimport Player from './Player/Player';\nimport InitGame from './InitGame/InitGame';\nimport avatars from './Player/avatar/avatar.js';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      /* Game resources */\n      players: [],\n      card: [1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10],\n      playerCount: 0,\n\n      /* game controls */\n      error: '',\n      turn: 0,\n\n      /* display controls */\n      phase: 0 // 0: Init, 1: Game, 2: End\n\n    };\n\n    this.playerNumberHandler = event => {\n      let playerCount = event.target.value,\n          error = \"\";\n\n      if (playerCount > 10) {\n        error = \"Maximum 10 players!\";\n        playerCount = 10;\n      }\n      /* Random avatar allocate */\n\n\n      for (let i = avatars.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        var _ref = [avatars[j], avatars[i]];\n        avatars[i] = _ref[0];\n        avatars[j] = _ref[1];\n      }\n\n      const players = [];\n      let n = 0;\n\n      for (let i = 0; i < playerCount; i++) {\n        players.push({\n          id: `player-${i}`,\n          name: `player-${i}`,\n          card: [],\n          avatar: avatars[n++]\n          /* cardNumber: 0, */\n          //remove due to inconsistent\n\n          /*  score: 0 */\n          //remove due to inconsistent\n\n        });\n      }\n\n      this.setState({\n        players: players,\n        playerCount: playerCount,\n        error: error\n      });\n    };\n\n    this.changeName = (event, index) => {\n      const players = [...this.state.players];\n      players[index].name = event.target.value;\n      this.setState({\n        players: players\n      });\n    };\n\n    this.gameStart = () => {\n      if (this.state.playerCount > 1) {\n        /* shuffle deck */\n        const card = [...this.state.card];\n\n        for (let i = card.length - 1; i > 0; i--) {\n          let j = Math.floor(Math.random() * (i + 1));\n          var _ref2 = [card[j], card[i]];\n          card[i] = _ref2[0];\n          card[j] = _ref2[1];\n          console.log(j);\n        }\n        /* Distributes cards */\n\n\n        let players = [...this.state.players];\n\n        for (let i = 0; i < 2; i++) players = players.map(player => {\n          player.card.push(card.pop());\n          return player;\n        });\n        /* hide init & display game UI */\n\n\n        this.setState({\n          players: players,\n          card: card,\n          phase: 1,\n          error: \"\"\n        });\n      } else this.setState({\n        error: \"There must be at least 2 players\"\n      });\n    };\n\n    this.draw = () => {\n      const players = [...this.state.players];\n      const activePlayerIndex = this.state.turn % this.state.playerCount;\n      const activePlayer = players[activePlayerIndex];\n      /* maximum 5 cards */\n\n      if (activePlayer.card.length < 5) {\n        const deck = this.state.card;\n        activePlayer.card[activePlayer.card.length] = deck.pop();\n        /* calculate score */\n\n        const score = activePlayer.card.reduce((score, cardValue) => score + cardValue);\n        /* announce winner if card = 5 and value < 21 */\n\n        if (activePlayer.card.length === 5 && score <= 21) {}\n\n        this.setState({\n          players: players,\n          error: \"\"\n        });\n      } else this.setState({\n        error: \"5 cards max!\"\n      });\n    };\n\n    this.deal = () => {\n      /* if last player then announce winner */\n      if (this.state.turn === Number(this.state.playerCount - 1)) {\n        /* End game */\n        this.setState({\n          phase: 2,\n          error: \"\"\n        });\n      } else {\n        const players = [...this.state.players];\n        const activePlayerIndex = this.state.turn % this.state.playerCount;\n        const activePlayer = players[activePlayerIndex];\n        /* only deal if score > 16 */\n\n        if (activePlayer.card.reduce((score, cardValue) => score + cardValue) > 15 || activePlayer.card.length === 5) {\n          let turn = this.state.turn;\n          turn++;\n          this.setState({\n            turn: turn,\n            error: \"\"\n          });\n        } else this.setState({\n          error: \"Score > 15 to deal\"\n        });\n      }\n      /* set active */\n\n    };\n  }\n\n  render() {\n    let ui = null;\n\n    switch (this.state.phase) {\n      case 0:\n        ui = React.createElement(\"div\", {\n          className: classes.init,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, \"Numbers of players\"), React.createElement(\"input\", {\n          className: classes.inputNumber,\n          type: \"number\",\n          max: \"10\",\n          onChange: this.playerNumberHandler,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          className: classes.startBtn,\n          onClick: this.gameStart,\n          value: \"Game Start!\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, \"Game Start!\"), React.createElement(InitGame, {\n          changeName: this.changeName,\n          count: this.state.playerCount,\n          players: [...this.state.players],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }));\n        break;\n\n      case 1:\n        const playerComponent = [...this.state.players].map(player => {\n          const score = player.card.reduce((score, cardValue) => score + cardValue);\n          return React.createElement(Player, {\n            key: player.name,\n            avatar: player.avatar,\n            name: player.name,\n            card: player.card,\n            cardNumber: player.card.length,\n            score: score > 21 ? \"BUSTED\" : player.card.length === 5 ? \"WINNER\" : score,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 143\n            },\n            __self: this\n          });\n        });\n        ui = React.createElement(\"div\", {\n          className: classes.game,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, playerComponent, React.createElement(\"button\", {\n          className: classes.button,\n          onClick: this.draw,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, \"Draw\"), React.createElement(\"button\", {\n          className: classes.button,\n          onClick: this.deal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, \"Deal\"));\n        break;\n\n      case 2:\n        ui = React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, \"End Game\");\n        break;\n\n      default:\n        ui = React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, \"Whoops! Something went wrong ... \");\n    }\n\n    return React.createElement(\"div\", {\n      className: classes.App,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: classes.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Vietnamese Poker\"), React.createElement(\"div\", {\n      className: classes.container,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, ui, React.createElement(\"p\", {\n      className: classes.error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, this.state.error)));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/Temporary Work/Project/react-poker-vn/Vietnamese-Poker/src/App.js"],"names":["React","Component","classes","Player","InitGame","avatars","App","state","players","card","playerCount","error","turn","phase","playerNumberHandler","event","target","value","i","length","j","Math","floor","random","n","push","id","name","avatar","setState","changeName","index","gameStart","console","log","map","player","pop","draw","activePlayerIndex","activePlayer","deck","score","reduce","cardValue","deal","Number","render","ui","init","inputNumber","startBtn","playerComponent","game","button","title","container"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport classes from './App.module.css';\r\nimport Player from './Player/Player'\r\nimport InitGame from './InitGame/InitGame'\r\nimport avatars from './Player/avatar/avatar.js'\r\n\r\nclass App extends Component {\r\n  state = {\r\n    /* Game resources */\r\n    players: [],\r\n    card: [\r\n      1, 1, 1, 1,\r\n      2, 2, 2, 2,\r\n      3, 3, 3, 3,\r\n      4, 4, 4, 4,\r\n      5, 5, 5, 5,\r\n      6, 6, 6, 6,\r\n      7, 7, 7, 7,\r\n      8, 8, 8, 8,\r\n      9, 9, 9, 9,\r\n      10, 10, 10, 10,\r\n      10, 10, 10, 10,\r\n      10, 10, 10, 10\r\n    ],\r\n    playerCount: 0,\r\n    /* game controls */\r\n    error: '',\r\n    turn: 0,\r\n    /* display controls */\r\n    phase: 0 // 0: Init, 1: Game, 2: End\r\n  }\r\n\r\n  /* Game initialization phase */\r\n  /* Custom number of players */\r\n  playerNumberHandler = (event) => {\r\n    let playerCount = event.target.value, error = \"\";\r\n    if (playerCount > 10) {\r\n      error = \"Maximum 10 players!\"\r\n      playerCount = 10;\r\n    }\r\n    /* Random avatar allocate */\r\n    for (let i = avatars.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1));\r\n      [avatars[i], avatars[j]] = [avatars[j], avatars[i]];\r\n    }\r\n    const players = [];\r\n    let n = 0;\r\n    for (let i = 0; i < playerCount; i++) {\r\n      players.push({\r\n        id: `player-${i}`,\r\n        name: `player-${i}`,\r\n        card: [],\r\n        avatar: avatars[n++]\r\n        /* cardNumber: 0, */ //remove due to inconsistent\r\n        /*  score: 0 */ //remove due to inconsistent\r\n      })\r\n    }\r\n    this.setState({ players: players, playerCount: playerCount, error: error });\r\n  }\r\n  /* Modify player's name */\r\n  changeName = (event, index) => {\r\n    const players = [...this.state.players];\r\n    players[index].name = event.target.value;\r\n    this.setState({ players: players })\r\n  }\r\n  gameStart = () => {\r\n    if (this.state.playerCount > 1) {\r\n      /* shuffle deck */\r\n      const card = [...this.state.card];\r\n      for (let i = card.length - 1; i > 0; i--) {\r\n        let j = Math.floor(Math.random() * (i + 1));\r\n        [card[i], card[j]] = [card[j], card[i]];\r\n        console.log(j);\r\n      }\r\n\r\n\r\n      /* Distributes cards */\r\n      let players = [...this.state.players];\r\n      for (let i = 0; i < 2; i++) players = players.map(player => { player.card.push(card.pop()); return player });\r\n\r\n      /* hide init & display game UI */\r\n      this.setState({ players: players, card: card, phase: 1, error: \"\" });\r\n    } else this.setState({ error: \"There must be at least 2 players\" })\r\n\r\n  }\r\n\r\n  /* Game phase */\r\n  draw = () => {\r\n    const players = [...this.state.players];\r\n    const activePlayerIndex = this.state.turn % this.state.playerCount;\r\n    const activePlayer = players[activePlayerIndex];\r\n\r\n    /* maximum 5 cards */\r\n    if (activePlayer.card.length < 5) {\r\n      const deck = this.state.card;\r\n      activePlayer.card[activePlayer.card.length] = deck.pop();\r\n      /* calculate score */\r\n      const score = activePlayer.card.reduce((score, cardValue) => score + cardValue)\r\n      /* announce winner if card = 5 and value < 21 */\r\n      if (activePlayer.card.length === 5 && score <= 21) { }\r\n\r\n      this.setState({ players: players, error: \"\" })\r\n    } else\r\n      this.setState({ error: \"5 cards max!\" })\r\n  }\r\n\r\n  deal = () => {\r\n    /* if last player then announce winner */\r\n    if (this.state.turn === Number(this.state.playerCount - 1)) {\r\n      /* End game */\r\n      this.setState({ phase: 2, error: \"\" });\r\n    } else {\r\n      const players = [...this.state.players];\r\n      const activePlayerIndex = this.state.turn % this.state.playerCount\r\n      const activePlayer = players[activePlayerIndex];\r\n      /* only deal if score > 16 */\r\n      if (activePlayer.card.reduce((score, cardValue) => score + cardValue) > 15 || activePlayer.card.length === 5) {\r\n        let turn = this.state.turn;\r\n        turn++;\r\n        this.setState({ turn: turn, error: \"\" });\r\n      } else this.setState({ error: \"Score > 15 to deal\" })\r\n    }\r\n    /* set active */\r\n  }\r\n\r\n  render() {\r\n    let ui = null;\r\n    switch (this.state.phase) {\r\n      case 0:\r\n        ui = (\r\n          <div className={classes.init}>\r\n            <h3>Numbers of players</h3>\r\n            <input className={classes.inputNumber} type=\"number\" max=\"10\" onChange={this.playerNumberHandler} />\r\n            <button className={classes.startBtn} onClick={this.gameStart} value=\"Game Start!\">Game Start!</button>\r\n            <InitGame changeName={this.changeName} count={this.state.playerCount} players={[...this.state.players]}  />\r\n          </div>\r\n        );\r\n        break;\r\n      case 1:\r\n        const playerComponent = [...this.state.players].map(player => {\r\n          const score = player.card.reduce((score, cardValue) => score + cardValue);\r\n          return (\r\n            <Player key={player.name} avatar={player.avatar} name={player.name} card={player.card} cardNumber={player.card.length} score={score > 21 ? \"BUSTED\" : player.card.length === 5 ? \"WINNER\" : score} />\r\n          )\r\n        }\r\n        )\r\n        ui = (\r\n          <div className={classes.game}>\r\n            {playerComponent}\r\n            <button className={classes.button} onClick={this.draw}>Draw</button>\r\n            <button className={classes.button} onClick={this.deal}>Deal</button>\r\n          </div>\r\n        )\r\n        break;\r\n      case 2:\r\n        ui = (<p>End Game</p>);\r\n        break;\r\n      default:\r\n        ui = (<p>Whoops! Something went wrong ... </p>)\r\n    }\r\n    return (\r\n      <div className={classes.App} >\r\n        <h1 className={classes.title}>Vietnamese Poker</h1>\r\n        <div className={classes.container}>\r\n          {ui}\r\n          <p className={classes.error}>{this.state.error}</p>\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n\r\n  }\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}